# 在沉浸式教育應用場域中的使用者學習行為蒐集與視覺化
## 作品發想／應用場域
VR在近幾年已成為熱門的展示模式，給予人們全新的視覺想像。
許多VR遊戲、VR教材也如雨後春筍般嶄露頭角。VR在教育應用
方面也逐漸受到重視。然而在沉浸式學習的過程中，學生的實
際使用行為一直沒有一個好的觀察方法，若能記錄學生在學習
環境中，花了多少時間在關注哪些東西，以及是否涵蓋了老師
希望學生學習的重點，則可以從中協助學生改善學習方法或修
正教材。由於市面上關於在沉浸環境下使用者視覺分析工具這
一塊還尚未成熟，因此本專題決定來深入研究。透過蒐集使用
者的眼球關注資訊，加以分析後應用到各種領域。

## 作品目標與挑戰
• 本作品主要針對VR沉浸環境下，針對教育場域進行使用者觀
看行為的收集
• 當使用者在VR環境下觀看教具時（模型）我們透過VR頭盔內
的眼動儀進行使用者觀看視點的收集，並在模型上紀錄使用
者眼動軌跡和專注時間，觀察使用者的關注狀況。
• 在教具幾何表面熱力圖視覺化的方式來呈現觀看順序，搭配
時間軸控制以及視覺化圖表量化使用者學習行為
• 在不影響視覺呈現的情況下，透過優化程式來降低眼動資料
收集以及即時3D熱力圖視覺呈現的運算成本。在CPU和GPU
的合作下設計高效的解決方案。

## 創新與延伸
傳統的使用者行為視覺化方法，大多只用於二維環境的使用
呈現，但隨著VR技術的進步，三維環境下的使用趨勢日益增加，
應要有相應的蒐集與視覺化方法來呈現這類型的使用者行為。
傳統方法會使用軌跡與熱力圖的分布得知使用者在使用過程中
注視的位置、走向，以及哪些區域是使用者花較多時間所關注。
我們的專題將傳統的使用者行為視覺化方法改善，以應用於
三維VR環境，我們解決了以下問題:
1.使用者離被注視物體的距離不同時，視野範圍大小不同
2.前方的物體會遮擋到後方物體的問題
3.除了頭戴位置會影響視線方向，眼球的移動也必須考慮
我們採用以熱力圖的方式來視覺化使用者行為，另外還加入
了時間軸和回放的功能，讓統計使用者得知使用者在個別時間
點的螢幕畫面、熱力圖分布情形，以及使用時間資料。

## 實現方法
為了精確收集使用者的視線，我們採用htc VIVE Pro Eye這一款
VR頭盔，並且運用該頭盔所偵測到的使用者觀看射線，將視線範
圍中眼睛所關注之處在模型上的每個vertex紀錄觀看視線的停留
時間（運用高斯分佈來計算頂點獲得的熱度） 。為了提高效能，
我們預先簡化了模型，並將觀看紀錄只存在簡化過的模型之上。
在後續基於觀看紀錄的累積的上色上，我們依序嘗試了不少方法，
包含直接直接針對UV texture塗色(圖一)，或是透過vertex
shader對每個頂點計算熱力顏色後進行內差(圖二)，或是在
fragment shader階段，針對每個fragment去尋找鄰近的熱點(圖
三)。。。等方法。
![image](https://github.com/tsumikihuang/00XR_modol_paint_shader/blob/master/%E5%9C%96%E7%89%871.png)
最後，我們採用混合做法，在vertex shader中紀錄鄰近的視線熱
點資訊，並在fragment shader中進行實際顏色的計算。兼顧效能
跟繪製品質。(如圖四)


## 系統架構圖

![image](https://github.com/tsumikihuang/00XR_modol_paint_shader/blob/master/%E5%9C%96%E7%89%872.png)

## 成果說明
• 即時熱力圖：
使用者的觀測過程中，會以視野中心（關注點）為中央對特定範
圍內給予相對應的熱點值。隨著觀測時間的累積，這些關注點會
形成一連串的軌跡，且物件會以記錄上的熱點累積程度畫出熱力
圖。距離關注點越遠，該熱點的顏色越接近綠色或藍色，距離關
注點越近則是顏色越紅。
(圖一) (圖二) (圖三)
系統架構圖
(圖四)
• 回放工具：
使用者的觀測完畢後，可透過時間軸回放，在不同時間點下物件
的熱力圖呈現情形。亦可抓取一段時間範圍中，觀察軌跡的分布
是如何移動。

## 未來展望
興趣點統計：
為了方便更有效的統計使用者觀看狀況，本系統預計提供讓教師標註多個興趣區ROI的功能，透過讓老師標註ROI，我們可以統計使用者觀看這些ROI的狀況，如滯留時間、進出次數、觀看時的專注度等資訊。

